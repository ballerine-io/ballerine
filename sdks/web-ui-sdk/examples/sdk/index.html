<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta name="description" content="Simple webpage for testing the SDK" />

    <title>Ballerine SDK test</title>
    <script async type="module" crossorigin src="/ballerine-sdk.umd.cjs"></script>
    <script>
      const onStartFlowClick = async () => {
        ballerineInitConfig = {
          uiConfig: {
            general: {
              colors: {
                primary: 'yellow',
              },
            },
            flows: {
              'my-kyc-flow': {
                steps: [
                  {
                    name: 'welcome',
                    id: 'welcome',
                  },
                  {
                    name: 'document-selection',
                    id: 'document-selection',
                    documentOptions: [
                      { type: 'id_card', kind: 'id_card' },
                      { type: 'drivers_license', kind: 'drivers_license' },
                      { type: 'passport', kind: 'passport' },
                      { type: 'voter_id', kind: 'voter_id' },
                    ],
                  },
                  {
                    name: 'document-photo',
                    id: 'document-photo',
                  },
                  {
                    name: 'check-document',
                    id: 'check-document',
                  },
                  {
                    name: 'document-photo-back-start',
                    id: 'document-photo-back-start',
                  },
                  {
                    name: 'document-photo-back',
                    id: 'document-photo-back',
                  },
                  {
                    name: 'check-document-photo-back',
                    id: 'check-document-photo-back',
                  },
                  {
                    name: 'selfie-start',
                    id: 'selfie-start',
                  },
                  {
                    name: 'selfie',
                    id: 'selfie',
                  },
                  {
                    name: 'check-selfie',
                    id: 'check-selfie',
                  },
                  {
                    name: 'loading',
                    id: 'loading',
                  },
                  {
                    name: 'final',
                    id: 'final',
                  },
                ],
              },
              'my-kyb-flow': {
                steps: [
                  {
                    name: 'welcome',
                    id: 'welcome',
                  },
                  {
                    name: 'document-start',
                    id: 'document-start',
                    type: 'business_registration',
                  },
                  {
                    name: 'document-photo',
                    id: 'document-photo',
                    type: 'business_registration',
                  },
                  {
                    name: 'document-start',
                    id: 'document-start',
                    type: 'proof_of_business_tax_id',
                  },
                  {
                    name: 'document-photo',
                    id: 'document-photo',
                    type: 'proof_of_business_tax_id',
                  },
                  {
                    name: 'document-start',
                    id: 'document-start',
                    type: 'bank_statement',
                  },
                  {
                    name: 'document-photo',
                    id: 'document-photo',
                    type: 'bank_statement',
                  },
                  {
                    name: 'document-selection',
                    id: 'document-selection',
                    documentOptions: [
                      { type: 'id_card', kind: 'id_card' },
                      { type: 'drivers_license', kind: 'drivers_license' },
                      { type: 'passport', kind: 'passport' },
                      { type: 'voter_id', kind: 'voter_id' },
                    ],
                  },
                  {
                    name: 'document-photo',
                    id: 'document-photo',
                  },
                  {
                    name: 'document-photo-back-start',
                    id: 'document-photo-back-start',
                  },
                  {
                    name: 'document-photo-back',
                    id: 'document-photo-back',
                  },
                  {
                    name: 'loading',
                    id: 'loading',
                  },
                  {
                    name: 'final',
                    id: 'final',
                  },
                ],
              },
            },
          },
          translations: {
            overrides: {
              en: {
                welcome: {
                  title: 'Text Override with init config',
                },
              },
              //remoteUrl: "https://cdn.ballerine.io/ui-packs/default/translation.json"
            },
          },
          endUserInfo: { id: 'test-id' },
          backendConfig: {},
        };
        await BallerineSDK.flows.init(ballerineInitConfig);
        const elementId = 'kyc-flow-1';

        await BallerineSDK.flows.mount({
          flowName: 'my-kyc-flow',
          elementId,
          callbacks: {
            onFlowNavigationUpdate(payload) {
              console.log('onFlowNavigation', payload);
            },
            onFlowComplete(payload) {
              console.log('onFlowComplete', payload);
            },
          },
        });
      };
    </script>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <header>HEADER</header>
    <div id="kyc-flow-1" style="width: 500px; height: 700px"></div>
    <button onclick="onStartFlowClick()">Start Flow 1</button>
    <footer>FOOTER</footer>
  </body>
</html>
